# TCP/IP 4계층

![20210811-045402](https://user-images.githubusercontent.com/58318786/128926308-8fdb0c09-c387-49af-8063-ea07cbbda78c.jpg)

## TCP/IP 계층 vs OSI 계층
* TCP/IP 프로토콜이 OSI 모델보다 먼저 개발
* TCP/IP는 인터넷 개발 이후 계속 표준화되어 신뢰성이 높음, 실질적 통신 관련 / OSI 계층은 장비 개발과 통신 표준을 위해 사용됨
* 범용적으로 사용하는 TCP 프로토콜과 IP 프로토콜을 OSI 7계층 형식에 맞춰 더 추상화(간략화) 시킨 모델

## 4계층: 응용 계층
* OSI에서 세션, 표현, 응용 계층에 해당
* 송신
    * 실제 데이터를 응용 계층에 넘기기, 데이터 인코딩하고 통신준비
* 수신
    * 데이터 디코딩 -> 사용자에게 넘기기
- 주요 프로토콜

    |프로토콜|설명|
    |-|-|
    |HTTP|TCP 기반 프로토콜, 포트번호 80번 사용|
    |DNS|도메인명에 대한 호스트 정보 제공
    |FTP|파일 전송 프로토콜
    |SMTP|메일 송신 프로토콜
    |POP3|메일 수신 프로토콜
    |SNMP|네트워크 구성관리, 성능관리, 장비관리, 보안관리를 위하여 UDP상에 정의된 응용 계층 표준 프로토콜
    |Telnet|원격 터미널 접속할 때 사용하는 프로토콜, 포트번호 23번 사용

## 3계층: 전송 계층
* OSI에서 전송 계층 해당
* 통신 노드 간의 연결을 제어하고 **신뢰성** 있는 데이터 전송 담당
* 송신
    * 상위 계층 데이터에 TCP 헤더를 붙임
    * 데이터 크기 크면 최대 전송 단위(MTU, 해당 레이어가 전송할 수 있는 최대 프로토콜 데이터 단위)로 쪼갬 => **세그먼트**
    * 세그먼트 송신할 때마다 어떤 순서로 쪼개졌는지 알기 위해 sequence 번호가 TCP 헤더에 기록 ⏩ 네트워킹 상황 따라 수신지에 도착하는 데이터의 순서가 바뀔 수 있기 때문, 패킷 누락 여부 확인
* 수신: TCP 헤더의 sequence 번호 검사 -> 누락 확인, 모두 수신될 때까지 대기 후 재조립
- 주요 프로토콜

    |프로토콜|설명|
    |-|-|
    |TCP|정확한 패킷의 전송을 보장
    |UDP|정확한 전송보다 빠른 속도의 전송이 필요한 멀티미디어 통신에서 사용

## 2계층: 인터넷 계층
* OSI에서 네트워크 계층 해당
* 데이터 단위: 패킷
* 송신
    * 통신 노드 간의 IP 패킷을 전송하는 기능과 라우팅 기능 담당
    * 세그먼트에 IP 헤더 붙임
* 수신
    * IP 헤더 검사 -> Destination IP 자신의 IP 주소와 일치하는지 비교 후 상위 계층으로 보냄
- 주요 프로토콜

    |프로토콜|설명|
    |-|-|
    |IP|비신뢰성, 비연결성 프로토콜
    |ARP| IP 주소로 MAC 주소를 알아오는 프로토콜
    |RARP|MAC 주소에 해당하는 IP 주소 알아오는 프로토콜
    |GARP|송, 수신 IP가 동일한 ARP 요청
    |ICMP|TCP/IP에서 IP 패킷 처리할 때 발생되는 문제를 알려주는 프로토콜

## 1계층: 네트워크 접속 계층
* OSI에서 물리, 데이터 링크 계층에 해당
* 데이터 단위: 프레임
* 송신
    * 패킷에 Ethernet 헤더와 Tail(FCS 붙음)
        * 이더넷: 랜에서 적용되는 규칙, 허브와 같은 장비에 연결된 데이터를 주고받을 때 사용
        * 헤더에는 송, 수신자의 물리적인 MAC 주소 담겨있음
        * FCS(Frame Check Squence): 데이터 전송 도중에 에러가 있는지 판별
* 수신
    * Ethernet 헤더 검사해서 Destination MAC 주소가 자신의 주소와 일치하는지 비교 후 상위 계층으로 보냄

### 참고
> 책 - [모두의 네트워크](http://www.yes24.com/Product/Goods/61794014)

> 책 - [성공과 실패를 결정하는 1%의 네트워크 원리](http://www.yes24.com/Product/Goods/90640081)

> 강의 - [인프런 - 모든 개발자를 위한 HTTP 웹 기본 지식
](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC)

> 강의 - [부스트코스 - 웹 백엔드](https://www.boostcourse.org/web326/lecture/58942/?isDesc=false)

> 강의 - [[10분 테코톡] 👨‍🏫르윈의 TCP UDP](https://www.youtube.com/watch?v=ikDVGYp5dhg)

> 블로그 - [[UDP, UDP Header] 개념잡기](https://rednooby.tistory.com/17)

> 블로그 - [TCP의 헤더에는 어떤 정보들이 담겨있는걸까?](https://evan-moon.github.io/2019/11/10/header-of-tcp/)

> 블로그 - [[Network] TCP/IP 모델 패킷 전송 과정](https://icarus8050.tistory.com/103)